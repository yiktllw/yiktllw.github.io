<template>
  <div class="blog" ref="blog">
    <div class="blog-info">
      <h1 class="blog-title">
        {{ currentBlog?.blogInfo.title ?? "Untitled" }}
      </h1>
      <div class="info">
        <span clas="author">
          <span class="ele-title">ä½œè€…ï¼š</span>{{ author || "æ— å" }}
        </span>
        <span class="create-time">
          <span class="ele-title">åˆ›å»ºæ—¶é—´ï¼š</span
          >{{
            formatTime_yyyy_mm_dd_hh_mm(currentBlog?.blogInfo.createTime ?? 0)
          }}
        </span>
        <span class="last-update">
          <span class="ele-title">æœ€åä¿®æ”¹ï¼š</span
          >{{
            formatTime_yyyy_mm_dd_hh_mm(currentBlog?.blogInfo.lastUpdate ?? 0)
          }}
        </span>
        <span class="copy-right">
          <span class="ele-title">è®¸å¯åè®®ï¼š</span>
          <p xmlns:cc="http://creativecommons.org/ns#">
            <a
              href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1"
              target="_blank"
              rel="license noopener noreferrer"
              style="display: inline-block"
              >CC BY-NC-SA 4.0<img
                style="
                  height: 22px !important;
                  margin-left: 3px;
                  vertical-align: text-bottom;
                "
                src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"
                alt="" /><img
                style="
                  height: 22px !important;
                  margin-left: 3px;
                  vertical-align: text-bottom;
                "
                src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"
                alt="" /><img
                style="
                  height: 22px !important;
                  margin-left: 3px;
                  vertical-align: text-bottom;
                "
                src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"
                alt="" /><img
                style="
                  height: 22px !important;
                  margin-left: 3px;
                  vertical-align: text-bottom;
                "
                src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"
                alt=""
            /></a>
          </p>
        </span>
      </div>
    </div>
    <p>
      æœ¬åšå®¢é€šè¿‡GitHub Actionsä»<a
        href="https://github.com/yiktllw/yiktllw.github.io"
        >yiktllw.github.io</a
      >ä»“åº“è‡ªåŠ¨æ„å»ºï¼Œæœªé‡‡ç”¨ä»»ä½•ç°æœ‰åšå®¢æ¡†æ¶ï¼Œæ—¨åœ¨å…¼é¡¾Markdownçš„ç¼–å†™ä¾¿åˆ©æ€§ä¸å¼€å‘è‡ªç”±åº¦ã€‚
    </p>
    <p>æŠ€æœ¯æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
    <ol>
      <li>ä»¥Vueä¸ºåŸºç¡€æ¡†æ¶</li>
      <li>
        ç¼–å†™TypeScriptè„šæœ¬å®ç°ï¼š
        <ul>
          <li>
            æ ¸å¿ƒè„šæœ¬ï¼šå°†Markdownè§£æä¸ºVueç»„ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆè·¯ç”±é…ç½®å’Œæ–‡ç« å…ƒæ•°æ®
          </li>
          <li>
            è¾…åŠ©è„šæœ¬ï¼šå®æ—¶ç›‘å¬Markdownæ–‡ä»¶å˜æ›´å¹¶åŒæ­¥æ›´æ–°Vueæ–‡ä»¶ï¼Œæ”¯æŒå¼€å‘çƒ­æ›´æ–°
          </li>
        </ul>
      </li>
      <li>é€šè¿‡GitHub Actionså®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²</li>
    </ol>
    <p><strong>ä»¥ä¸‹ä¸ºä½¿ç”¨æœ¬é¡¹ç›®æ„å»ºä¸ªäººåšå®¢çš„è¿‡ç¨‹ã€‚</strong></p>
    <h2 id="%E7%9B%AE%E5%BD%95" tabindex="-1">ç›®å½•</h2>
    <p>
      <a href="#1.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">1. å‡†å¤‡å·¥ä½œ</a><br />
      <a href="#2.%E5%90%AF%E5%8A%A8%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1"
        >2. å¯åŠ¨å¼€å‘æœåŠ¡</a
      ><br />
      <a href="#3.%E7%BC%96%E5%86%99%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0"
        >3. ç¼–å†™åšå®¢æ–‡ç« </a
      ><br />
      <a href="#4.%E5%8F%91%E5%B8%83%E5%88%B0-github-pages"
        >4. å‘å¸ƒåˆ°GitHub Pages</a
      ><br />
      <a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">5. æ³¨æ„äº‹é¡¹</a>
    </p>
    <h2 id="1.%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" tabindex="-1">
      1.å‡†å¤‡å·¥ä½œ
    </h2>
    <ol>
      <li>
        <p><strong>å…‹éš†ä»“åº“</strong></p>
        <ul>
          <li>Fork æœ¬é¡¹ç›®åˆ°ä½ çš„ GitHub è´¦æˆ·</li>
          <li>
            å°†é¡¹ç›®æºç å…‹éš†åˆ°æœ¬åœ°ï¼š
            <pre><code class="hljs" style="font-family: yiktllw-code, serif;"><div class="copy-button" @click="copyCode(0)"><img class="copy-img g-icon" :src="copy_svg"/></div><details class="code-details" open="true"><summary>bash</summary><div class="line">git <span class="hljs-built_in">clone</span> https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å.git</div></details></code></pre>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>ç¯å¢ƒé…ç½®</strong></p>
        <ul>
          <li>
            å®‰è£… Bun è¿è¡Œæ—¶ç¯å¢ƒ (<a href="https://bun.sh/docs/installation"
              >å®˜æ–¹å®‰è£…æŒ‡å—</a
            >)
          </li>
          <li>
            å®‰è£… Vite æ„å»ºå·¥å…·ï¼š
            <pre><code class="hljs" style="font-family: yiktllw-code, serif;"><div class="copy-button" @click="copyCode(2)"><img class="copy-img g-icon" :src="copy_svg"/></div><details class="code-details" open="true"><summary>bash</summary><div class="line">bun add -g vite</div></details></code></pre>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>å®‰è£…ä¾èµ–</strong></p>
        <pre><code class="hljs" style="font-family: yiktllw-code, serif;"><div class="copy-button" @click="copyCode(4)"><img class="copy-img g-icon" :src="copy_svg"/></div><details class="code-details" open="true"><summary>bash</summary><div class="line">bun install</div></details></code></pre>
      </li>
    </ol>
    <h2
      id="2.%E5%90%AF%E5%8A%A8%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1"
      tabindex="-1"
    >
      2.å¯åŠ¨å¼€å‘æœåŠ¡
    </h2>
    <p><strong>å¯åŠ¨æ–‡ä»¶ç›‘å¬</strong>ï¼š</p>
    <pre><code class="hljs" style="font-family: yiktllw-code, serif;"><div class="copy-button" @click="copyCode(6)"><img class="copy-img g-icon" :src="copy_svg"/></div><details class="code-details" open="true"><summary>bash</summary><div class="line">bun watch</div></details></code></pre>
    <p><strong>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</strong>ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰ï¼š</p>
    <pre><code class="hljs" style="font-family: yiktllw-code, serif;"><div class="copy-button" @click="copyCode(8)"><img class="copy-img g-icon" :src="copy_svg"/></div><details class="code-details" open="true"><summary>bash</summary><div class="line">bun dev</div></details></code></pre>
    <p>è®¿é—® <code>http://localhost:5173</code> é¢„è§ˆå®æ—¶æ•ˆæœ</p>
    <p><strong>é…ç½®è¯„è®ºç³»ç»Ÿ</strong></p>
    <p>
      å®‰è£…<a href="https://github.com/apps/utterances">utteranc</a
      >åˆ°forkçš„ä»“åº“ï¼Œå¹¶ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•çš„<code>.env</code>æ–‡ä»¶ä¸­å¯¹åº”çš„ä¿¡æ¯ã€‚
    </p>
    <h2
      id="3.%E7%BC%96%E5%86%99%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0"
      tabindex="-1"
    >
      3.ç¼–å†™åšå®¢æ–‡ç« 
    </h2>
    <ol>
      <li>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>/blogs</code> æ–‡ä»¶å¤¹ä¸­æ–°å»º Markdown æ–‡ä»¶</li>
      <li>
        ç³»ç»Ÿä¼šè‡ªåŠ¨å®Œæˆï¼š
        <ul>
          <li>Markdown â†’ Vue ç»„ä»¶è½¬æ¢ï¼ˆç”Ÿæˆè‡³ <code>/src/blogs</code>ï¼‰</li>
          <li>è‡ªåŠ¨æ³¨å†Œè·¯ç”± <code>/blog/æ–‡ä»¶å</code></li>
        </ul>
      </li>
      <li>ç¼–è¾‘ <code>/src/blogs.json</code> é…ç½®æ–‡ç« æ ‡é¢˜</li>
    </ol>
    <h2 id="4.%E5%8F%91%E5%B8%83%E5%88%B0-github-pages" tabindex="-1">
      4.å‘å¸ƒåˆ° GitHub Pages
    </h2>
    <ol>
      <li>
        <p><strong>æœ¬åœ°æ„å»ºé¢„è§ˆ</strong>ï¼š</p>
        <pre><code class="hljs" style="font-family: yiktllw-code, serif;"><div class="copy-button" @click="copyCode(10)"><img class="copy-img g-icon" :src="copy_svg"/></div><details class="code-details" open="true"><summary>bash</summary><div class="line">bun run build  <span class="hljs-comment"># ç”Ÿæˆé™æ€æ–‡ä»¶</span></div><div class="line">bun run preview  <span class="hljs-comment"># æœ¬åœ°é¢„è§ˆç”Ÿäº§ç¯å¢ƒæ•ˆæœ</span></div></details></code></pre>
      </li>
      <li>
        <p><strong>éƒ¨ç½²åˆ° GitHub</strong>ï¼š</p>
        <pre><code class="hljs" style="font-family: yiktllw-code, serif;"><div class="copy-button" @click="copyCode(12)"><img class="copy-img g-icon" :src="copy_svg"/></div><details class="code-details" open="true"><summary>bash</summary><div class="line">git add .</div><div class="line">git commit -m <span class="hljs-string">&quot;æ›´æ–°åšå®¢å†…å®¹&quot;</span></div><div class="line">git push origin main</div></details></code></pre>
      </li>
      <li>
        <p>è‡ªåŠ¨éƒ¨ç½²æµç¨‹ï¼š</p>
        <ul>
          <li>GitHub Actions ä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²</li>
          <li>
            éƒ¨ç½²å®Œæˆåè®¿é—® <code>https://ä½ çš„ç”¨æˆ·å.github.io/ä»“åº“å</code>
          </li>
        </ul>
      </li>
    </ol>
    <h2 id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" tabindex="-1">æ³¨æ„äº‹é¡¹</h2>
    <ol>
      <li>ä¿æŒæ–‡ä»¶ç›‘å¬æœåŠ¡ (<code>bun watch</code>) æŒç»­è¿è¡Œ</li>
      <li>ç¡®ä¿ GitHub ä»“åº“å·²å¯ç”¨ Pages æœåŠ¡ï¼ˆSettings â†’ Pagesï¼‰</li>
    </ol>
  </div>
</template>
<script setup lang="ts">
import { ref, nextTick } from "vue";
import copy_svg from "@/assets/svg/copy.svg";
import blogs from "@/blogs.json";
import { formatTime_yyyy_mm_dd_hh_mm } from "@/utils/time";

const blog = ref<HTMLElement>();
const author = import.meta.env.VITE_AUTHOR;

const utteranc = document.createElement("script");
utteranc.src = "https://utteranc.es/client.js";
utteranc.setAttribute("repo", import.meta.env.VITE_COMMENT_REPO);
utteranc.setAttribute("issue-term", "about");
utteranc.setAttribute("label", "ğŸ’¬comment");
utteranc.setAttribute("theme", `github-${window.theme ?? "dark"}`);
utteranc.setAttribute("crossorigin", "anonymous");
utteranc.setAttribute("async", "true");
nextTick(() => {
  blog.value?.appendChild(utteranc);
  // setTimeout(() => {
  window.mermaid?.initialize({
    startOnLoad: false,
    theme: window.theme === "dark" ? "dark" : "default",
  });
  window.mermaid?.run();
  // }, 1000);
});

const currentBlog = blogs.find(
  (item) => item.component === "@/blogs/about.vue",
);
document.title = currentBlog?.blogInfo.title ?? "yiktllwçš„åšå®¢";

const codeToCopy = [
  "git clone https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å.git",
  "git clone https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å.git",
  "bun add -g vite",
  "bun add -g vite",
  "bun install",
  "bun install",
  "bun watch",
  "bun watch",
  "bun dev",
  "bun dev",
  "bun run build  # ç”Ÿæˆé™æ€æ–‡ä»¶\nbun run preview  # æœ¬åœ°é¢„è§ˆç”Ÿäº§ç¯å¢ƒæ•ˆæœ",
  "bun run build  # ç”Ÿæˆé™æ€æ–‡ä»¶\nbun run preview  # æœ¬åœ°é¢„è§ˆç”Ÿäº§ç¯å¢ƒæ•ˆæœ",
  'git add .\ngit commit -m "æ›´æ–°åšå®¢å†…å®¹"\ngit push origin main',
  'git add .\ngit commit -m "æ›´æ–°åšå®¢å†…å®¹"\ngit push origin main',
];
const copyCode = (index: number) => {
  const code = codeToCopy[index];
  navigator.clipboard.writeText(code);
};
</script>
